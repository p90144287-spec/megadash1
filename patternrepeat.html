<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pattern Repeat Game</title>
<title>Pattern Repeat Game | Memory Training Brain Game</title>
<meta name="description" content="Watch a sequence of colored tiles and repeat it in the same order. Train your memory and concentration with this fun brain game.">
<meta name="keywords" content="pattern repeat game, memory game, brain training, Simon game, concentration game, focus game, cognitive game">

<meta property="og:title" content="Pattern Repeat Game | Memory Training Brain Game">
<meta property="og:description" content="Test your memory by repeating sequences of colored tiles. Boost focus and brain skills with this fun game.">
<meta property="og:type" content="game">
<meta property="og:url" content="https://yourwebsite.com/pattern-repeat.html">
<meta property="og:image" content="https://yourwebsite.com/pattern-preview.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Pattern Repeat Game">
<meta name="twitter:description" content="Repeat the sequence of colored tiles to train your memory and focus.">
<meta name="twitter:image" content="https://yourwebsite.com/pattern-preview.png">

<link rel="icon" href="icon.jpg" sizes="32x32" type="image/png">

<style>
* {
  box-sizing: border-box;
  font-family: 'Poppins', sans-serif;
}

body {
  margin: 0;
  height: 100vh;
  background: linear-gradient(135deg, #141e30, #243b55);
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

#game {
  width: 90%;
  max-width: 320px;
  text-align: center;
}

#level {
  font-size: 20px;
  margin-bottom: 10px;
}

#message {
  font-size: 14px;
  margin-bottom: 15px;
}

#pad {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.btn {
  aspect-ratio: 1;
  border-radius: 16px;
  opacity: 0.8;
  transition: transform 0.1s, opacity 0.1s;
}

.btn.active {
  opacity: 1;
  transform: scale(1.05);
}

.red { background: #ff4d4d; }
.blue { background: #4d79ff; }
.green { background: #4dff88; }
.yellow { background: #ffe04d; }

#start {
  margin-top: 16px;
  padding: 10px;
  border-radius: 8px;
  background: #00c6ff;
  border: none;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="game">
  <div id="level">Level: 0</div>
  <div id="message">Press Start</div>

  <div id="pad">
    <div class="btn red" data-color="red"></div>
    <div class="btn blue" data-color="blue"></div>
    <div class="btn green" data-color="green"></div>
    <div class="btn yellow" data-color="yellow"></div>
  </div>

  <button id="start">START</button>
</div>

<script>
/* =======================
   OFFLINE SOUND SYSTEM
======================= */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioCtx();

function beep(freq, duration = 0.25) {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();

  osc.frequency.value = freq;
  gain.gain.value = 0.15;

  osc.connect(gain);
  gain.connect(audioCtx.destination);

  osc.start();
  gain.gain.exponentialRampToValueAtTime(
    0.001,
    audioCtx.currentTime + duration
  );
  osc.stop(audioCtx.currentTime + duration);
}

const sounds = {
  red: () => beep(300),
  blue: () => beep(450),
  green: () => beep(600),
  yellow: () => beep(750),
  wrong: () => beep(150, 0.6),
  level: () => beep(1000, 0.3)
};

/* =======================
   GAME LOGIC
======================= */
const buttons = document.querySelectorAll(".btn");
const levelEl = document.getElementById("level");
const messageEl = document.getElementById("message");
const startBtn = document.getElementById("start");

let sequence = [];
let userIndex = 0;
let level = 0;
let accepting = false;

function randomColor() {
  const colors = ["red", "blue", "green", "yellow"];
  return colors[Math.floor(Math.random() * colors.length)];
}

function flash(color) {
  const btn = document.querySelector(`.${color}`);
  btn.classList.add("active");
  sounds[color]();
  setTimeout(() => btn.classList.remove("active"), 300);
}

function playSequence() {
  accepting = false;
  messageEl.textContent = "Watch carefully";

  sequence.forEach((color, i) => {
    setTimeout(() => flash(color), i * 600);
  });

  setTimeout(() => {
    accepting = true;
    userIndex = 0;
    messageEl.textContent = "Your turn";
  }, sequence.length * 600);
}

function nextLevel() {
  level++;
  levelEl.textContent = "Level: " + level;
  sequence.push(randomColor());
  sounds.level();
  playSequence();
}

buttons.forEach(btn => {
  btn.addEventListener("click", () => {
    if (!accepting) return;

    const color = btn.dataset.color;
    flash(color);

    if (color === sequence[userIndex]) {
      userIndex++;
      if (userIndex === sequence.length) {
        setTimeout(nextLevel, 600);
      }
    } else {
      sounds.wrong();
      messageEl.textContent = "Wrong! Game Over";
      resetGame();
    }
  });
});

function resetGame() {
  accepting = false;
  sequence = [];
  level = 0;
  setTimeout(() => {
    levelEl.textContent = "Level: 0";
    messageEl.textContent = "Press Start";
  }, 800);
}

startBtn.addEventListener("click", () => {
  if (audioCtx.state === "suspended") audioCtx.resume();
  resetGame();
  setTimeout(nextLevel, 300);
});
</script>

</body>
</html>
